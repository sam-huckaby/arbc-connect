<div class="padded-page-container">
    <div class="loaded-illustration" *ngIf="illustration$ | async as illustration; else indicator">
        <div class="owner-view" *ngIf="illustration.creator !== userId; else visitor">
            <form class="illustration-form" [formGroup]="illustrationForm" #editIllustrationForm="ngForm">
                <div class="responsive-breakdown space-between" id="top-metadata">
                    <span class="field-label">Created: {{illustration.createdAt | date:'longDate'}}</span>
                </div>
                <div class="responsive-breakdown">
                    <mat-form-field appearance="outline" class="flex-full">
                        <mat-label for="title_illustration_input">Title</mat-label>
                        <input matInput
                            placeholder="Ex. The Angry Potter"
                            id="title_illustration_input"
                            class="responsive-width"
                            formControlName="title" required>
                    </mat-form-field>
                </div>
                <div class="responsive-expand flex-full last-input-container">
                    <mat-form-field appearance="outline" class="flex-full last-input-field">
                        <mat-label for="body_illustration_input">Content</mat-label>
                        <textarea matInput
                            placeholder="Ex. There once was a potter who made things and then broke them" id="body_illustration_input"
                            formControlName="body" class="illustration-content responsive-width" required></textarea>
                    </mat-form-field>
                </div>
                <div class="bottom-controls">
                    <button class="control-button" [disabled]="!illustrationForm.valid" (click)="deleteIllustration()" mat-raised-button color="warn"><fa-icon [icon]="faTrash"></fa-icon></button>
                    <divl class="spacer"></divl>
                    <button class="control-button" [disabled]="!illustrationForm.dirty" (click)="resetChanges()" mat-raised-button>Reset</button>
                    <button class="control-button" [disabled]="!illustrationForm.valid || !illustrationForm.dirty" (click)="saveChanges()" mat-raised-button color="primary">Save</button>
                </div>
            </form>
        </div>
        <ng-template #visitor>
            <div class="visitor-view">
                <div class="responsive-breakdown space-between" id="top-metadata">
                    <span class="field-label">Created: {{illustration.createdAt | date:'longDate'}}</span>
                </div>
                <div class="header-text">{{illustration.title}}</div>
                <div class="regular-text">Body: {{illustration.body}}</div>
            </div>
        </ng-template>
    </div>
    <div class="operator" *ngIf="(!isDeleting && !isSaving) else indicator"></div>
    <ng-template #indicator>
        <div class="fullscreen-loading-veil">
            Loading...
        </div>
    </ng-template>
</div>